import{r as p,D as i,W as f,C as d}from"./index.7966e040.js";var o;(function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"})(o||(o={}));var c;(function(e){e.None="NONE",e.Slide="SLIDE",e.Fade="FADE"})(c||(c={}));const l=p("StatusBar"),h={[i.dark]:o.Dark,[i.light]:o.Light,[i.system]:o.Default};function k(e){return e.length===4?`#${e[1]}${e[1]}${e[2]}${e[2]}${e[3]}${e[3]}`:e}class y extends f{constructor(){super(...arguments),this.darkModeClass="dark",this.registeredListener=!1,this.appearanceListeners=new Set,this.syncStatusBar=!0}async setNativeDarkModeListener(t,a){throw this.unimplemented("setNativeDarkModeListener is native only")}async init({cssClass:t,getter:a,syncStatusBar:s}={}){t&&(document.documentElement.classList.remove(this.darkModeClass),this.darkModeClass=t),typeof a<"u"&&(this.getter=a),typeof s=="boolean"&&(this.syncStatusBar=s),this.registeredListener||await this.registerDarkModeListener(),await this.update()}async configure(t){console.warn("DarkMode.configure is deprecated. Please use DarkMode.init instead."),await this.init(t)}async addAppearanceListener(t){return this.appearanceListeners.add(t),Promise.resolve({remove:()=>this.appearanceListeners.delete(t)})}async update(t){var a;let s=i.system;this.getter&&(s=(a=await this.getter())!==null&&a!==void 0?a:i.system);let r=s;if(s===i.system){let n;if(t)n=t.dark;else{const{dark:u}=await this.isDarkMode();n=u}r=n?i.dark:i.light}return r!==this.appearance&&(this.appearance=r,document.body.classList[r===i.dark?"add":"remove"](this.darkModeClass)),d.isNativePlatform()&&await this.handleStatusBar(r),t&&this.appearanceListeners.forEach(n=>{n(t)}),Promise.resolve(r)}async handleStatusBar(t){let a=d.getPlatform()==="ios";if(this.syncStatusBar&&d.getPlatform()==="android"){const s=document.querySelector("ion-content");if(s){const r=getComputedStyle(s).getPropertyValue("--background").trim();r&&(await l.setBackgroundColor({color:k(r)}),a=!0)}}a&&await l.setStyle({style:h[t]})}}export{y as D};
